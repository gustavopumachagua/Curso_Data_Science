| **Inicio**            | **atr谩s 18**          | **Siguiente 20**             |
| --------------------- | --------------------- | ---------------------------- |
| [](../../README.md) | [](./18.Trigger.md) | [](./20.Scheduled_JOBS.md) |

---

## **ndice**

| Temario                                                                                             |
| --------------------------------------------------------------------------------------------------- |
| [Introducci贸n](#introducci贸n)                                                                       |
| [C贸mo realizar un Backup desde Management Studio](#c贸mo-realizar-un-backup-desde-management-studio) |
| [Como restaurar un Backup](#como-restaurar-un-backup)                                               |
| [C贸mo crear un Backup desde un Script ](#c贸mo-crear-un-backup-desde-un-script)                      |
| [Conclusi贸n](#conclusi贸n)                                                                           |

---

# **Backup y Restore DataBase**

---

## **Introducci贸n**

Las operaciones de `Backup` y `Restore` en SQL Server son utilizadas para realizar copias de seguridad y restaurar bases de datos, respectivamente. Estas operaciones son fundamentales para garantizar la integridad y disponibilidad de los datos, y son vitales en la administraci贸n de bases de datos. A continuaci贸n, se explica detalladamente cada una de estas operaciones junto con un ejemplo utilizando la base de datos Northwind.

**Backup (Copia de seguridad):**

La operaci贸n de `Backup` se utiliza para crear una copia de seguridad de una base de datos en un punto determinado en el tiempo. Esta copia de seguridad incluye todos los datos y objetos de la base de datos, como tablas, vistas, procedimientos almacenados, etc. Los `backups` se utilizan para proteger los datos ante posibles p茅rdidas, ya sea por fallas de hardware, errores humanos o desastres naturales.

Ejemplo de `Backup` de la base de datos Northwind:

```
-- Crear una copia de seguridad completa de la base de datos Northwind
BACKUP DATABASE Northwind
TO DISK = 'C:\Backup\Northwind.bak'
WITH FORMAT;
```

En este ejemplo, se realiza una copia de seguridad completa de la base de datos Northwind. La instrucci贸n `BACKUP DATABASE` se utiliza para iniciar la operaci贸n de copia de seguridad, y se especifica el nombre y ubicaci贸n del archivo de respaldo (`'C:\Backup\Northwind.bak'`). El modificador `WITH FORMAT` indica que se desea sobrescribir cualquier copia de seguridad anterior y crear un nuevo archivo de respaldo.

**Restore (Restauraci贸n):**

La operaci贸n de `Restore` se utiliza para restaurar una base de datos a partir de una copia de seguridad previamente creada. Permite recuperar los datos y objetos de una base de datos en un estado anterior en caso de p茅rdida de datos o da帽os en la base de datos.

Ejemplo de Restauraci贸n de la base de datos Northwind:

```
-- Restaurar la base de datos Northwind desde una copia de seguridad
RESTORE DATABASE Northwind
FROM DISK = 'C:\Backup\Northwind.bak'
WITH REPLACE;
```

En este ejemplo, se restaura la base de datos Northwind a partir de una copia de seguridad previamente creada. La instrucci贸n `RESTORE DATABASE` se utiliza para iniciar la operaci贸n de restauraci贸n, y se especifica el nombre y ubicaci贸n del archivo de respaldo (`'C:\Backup\Northwind.bak'`). El modificador `WITH REPLACE` indica que se desea reemplazar cualquier base de datos existente con el mismo nombre.

Es importante tener en cuenta que las operaciones de Backup y Restore deben realizarse con precauci贸n y siguiendo las mejores pr谩cticas de administraci贸n de bases de datos. Se recomienda realizar copias de seguridad regularmente y almacenarlas en ubicaciones seguras fuera del servidor de base de datos para garantizar la disponibilidad y recuperaci贸n de los datos en caso de un evento adverso.

En conclusi贸n, las operaciones de `Backup` y `Restore` en SQL Server son fundamentales para garantizar la integridad y disponibilidad de los datos. El backup permite crear copias de seguridad de la base de datos en un punto determinado en el tiempo, mientras que el restore permite restaurar una base de datos a partir de una copia de seguridad previamente creada. Estas operaciones son esenciales en la administraci贸n de bases de datos y ayudan a proteger los datos ante posibles p茅rdidas o da帽os.

[](#铆ndice)

---

## **C贸mo realizar un Backup desde Management Studio**

Para realizar un backup desde SQL Server Management Studio, sigue los siguientes pasos:

1. Abre SQL Server Management Studio y con茅ctate a la instancia de SQL Server donde se encuentra la base de datos Northwind.

2. En el Explorador de objetos, expande la carpeta "`Bases de datos`" y localiza la base de datos Northwind.

3. Haz clic derecho sobre la base de datos Northwind y selecciona "`Tareas`" -> "`Realizar copia de seguridad`".

4. Aparecer谩 la ventana "`Copia de seguridad de la base de datos`". En la pesta帽a "`General`", verifica que la base de datos Northwind est茅 seleccionada.

5. En la secci贸n "`Configuraci贸n de copia de seguridad`", puedes especificar las siguientes opciones:

- **Tipo de copia de seguridad:** selecciona "`Copia de seguridad completa`" para realizar una copia completa de la base de datos.
- **Ubicaci贸n de salida:** selecciona el destino donde se almacenar谩 el archivo de copia de seguridad. Puedes elegir entre un archivo local o una unidad de red.
- **Nombre y descripci贸n del archivo:** puedes especificar un nombre para el archivo de copia de seguridad.
- **Expire despu茅s de:** puedes establecer una fecha de vencimiento para la copia de seguridad.

6. Haz clic en "`Aceptar`" para iniciar la copia de seguridad. Ver谩s el progreso de la operaci贸n en la ventana "`Copia de seguridad de la base de datos`".

7. Una vez finalizada la copia de seguridad, recibir谩s una notificaci贸n indicando que se complet贸 correctamente.

Ejemplo de Backup desde Management Studio de la base de datos Northwind:

1. Abre SQL Server Management Studio y con茅ctate a la instancia de SQL Server donde se encuentra la base de datos Northwind.

2. En el Explorador de objetos, expande la carpeta "`Bases de datos`" y haz clic derecho sobre la base de datos Northwind.

3. Selecciona "`Tareas`" -> "`Realizar copia de seguridad`".

4. En la ventana "`Copia de seguridad de la base de datos`", verifica que la base de datos Northwind est茅 seleccionada.

5. En la secci贸n "`Configuraci贸n de copia de seguridad`", elige un destino para el archivo de copia de seguridad. Por ejemplo, selecciona "`Disco`" y luego haz clic en "`Agregar`".

6. En la ventana emergente, selecciona una ubicaci贸n local para el archivo de copia de seguridad, como "`C:\Backup\Northwind.bak`". Aseg煤rate de que el tipo de archivo sea "`.bak`".

7. Haz clic en "`Aceptar`" para volver a la ventana "`Copia de seguridad de la base de datos`". Verifica que el archivo de copia de seguridad aparezca en la lista.

8. Haz clic en "`Aceptar`" para iniciar la copia de seguridad. Observa el progreso en la ventana "`Copia de seguridad de la base de datos`".

9. Una vez finalizada la copia de seguridad, recibir谩s una notificaci贸n de que se ha completado correctamente.

Recuerda que es importante almacenar las copias de seguridad en un lugar seguro y seguir las mejores pr谩cticas de respaldo para garantizar la disponibilidad y recuperaci贸n de los datos en caso de una p茅rdida.

[](#铆ndice)

---

## **Como restaurar un Backup**

Para restaurar un backup en SQL Server, puedes seguir los siguientes pasos:

1. Abre SQL Server Management Studio y con茅ctate a la instancia de SQL Server donde deseas restaurar el backup.

2. En el Explorador de objetos, expande la carpeta "`Bases de datos`" y haz clic derecho sobre ella. Selecciona "`Restaurar base de datos`".

3. En la ventana "`Restaurar base de datos`", selecciona la opci贸n "`Dispositivo`" en la secci贸n "`Origen`".

4. Haz clic en el bot贸n "`Agregar`" y luego en "`Buscar`" para seleccionar el archivo de backup que deseas restaurar. Busca el archivo de backup en tu sistema de archivos y haz clic en "`Aceptar`".

5. En la secci贸n "`Destino`", verifica que el nombre de la base de datos sea correcto. Si deseas cambiar el nombre de la base de datos, puedes hacerlo en el campo correspondiente.

6. En la secci贸n "`Opciones de restauraci贸n`", selecciona las opciones adecuadas para tu escenario. Por ejemplo, puedes elegir sobrescribir la base de datos existente, dejar la base de datos en modo de recuperaci贸n completa, etc.

7. Haz clic en "`Aceptar`" para iniciar el proceso de restauraci贸n. Ver谩s el progreso de la operaci贸n en la ventana "`Restaurar base de datos`".

8. Una vez completada la restauraci贸n, recibir谩s una notificaci贸n indicando que se ha realizado correctamente.

Ejemplo de restauraci贸n de un backup en SQL Server con la base de datos Northwind:

1. Abre SQL Server Management Studio y con茅ctate a la instancia de SQL Server donde deseas restaurar el backup.

2. En el Explorador de objetos, haz clic derecho sobre la carpeta "`Bases de datos`" y selecciona "`Restaurar base de datos`".

3. En la ventana "`Restaurar base de datos`", selecciona la opci贸n "`Dispositivo`" en la secci贸n "`Origen`".

4. Haz clic en el bot贸n "`Agregar`" y busca el archivo de backup de la base de datos Northwind. Por ejemplo, busca el archivo "`Northwind.bak`" que has guardado previamente en tu sistema de archivos.

5. En la secci贸n "`Destino`", verifica que el nombre de la base de datos sea "`Northwind`" o el nombre que desees utilizar para la base de datos restaurada.

6. En la secci贸n "`Opciones de restauraci贸n`", puedes ajustar las opciones seg煤n tus necesidades. Por ejemplo, puedes sobrescribir la base de datos existente si ya existe una base de datos con el mismo nombre.

7. Haz clic en "`Aceptar`" para iniciar el proceso de restauraci贸n. Observa el progreso en la ventana "`Restaurar base de datos`".

8. Una vez finalizada la restauraci贸n, recibir谩s una notificaci贸n de que se ha completado correctamente. La base de datos Northwind estar谩 disponible para su uso.

Es importante tener en cuenta que al restaurar una base de datos, se sobrescribir谩n los datos existentes en la base de datos objetivo. Por lo tanto, es recomendable realizar una copia de seguridad de la base de datos existente antes de realizar la restauraci贸n.

[](#铆ndice)

---

## **C贸mo crear un Backup desde un Script**

Para crear un backup desde un script en SQL Server, puedes seguir los siguientes pasos:

1. Abre SQL Server Management Studio y con茅ctate a la instancia de SQL Server donde se encuentra la base de datos que deseas respaldar.

2. Abre una nueva consulta en la que escribir谩s el script para crear el backup.

3. Utiliza la instrucci贸n `BACKUP DATABASE` seguida del nombre de la base de datos que deseas respaldar y la cl谩usula `TO DISK` seguida de la ruta y el nombre del archivo de respaldo. Por ejemplo:

```
BACKUP DATABASE Northwind
TO DISK = 'C:\Backup\Northwind.bak'
```

4. Opcionalmente, puedes especificar otras opciones de respaldo como `WITH INIT` para crear un nuevo conjunto de respaldo o `WITH FORMAT` para formatear el medio de respaldo antes de realizar el respaldo. Por ejemplo:

```
BACKUP DATABASE Northwind
TO DISK = 'C:\Backup\Northwind.bak'
WITH INIT, FORMAT
```

5. Ejecuta el script presionando F5 o haciendo clic en el bot贸n "`Ejecutar`".

6. Verifica que el respaldo se haya creado correctamente y que no haya errores en la ventana "`Mensajes`".

Ejemplo de creaci贸n de un backup desde un script en SQL Server con la base de datos Northwind:

```
BACKUP DATABASE Northwind
TO DISK = 'C:\Backup\Northwind.bak'
WITH INIT, FORMAT
```

En este ejemplo, se crea un respaldo de la base de datos Northwind y se guarda en el archivo '`C:\Backup\Northwind.bak`'. Se utiliza la opci贸n `WITH INIT` para crear un nuevo conjunto de respaldo y `WITH FORMAT` para formatear el medio de respaldo.

Es importante asegurarse de tener los permisos necesarios para realizar el respaldo de la base de datos y que la ruta y el nombre del archivo de respaldo sean v谩lidos y accesibles. Tambi茅n se recomienda almacenar los respaldos en ubicaciones seguras y realizar copias de seguridad de manera regular para proteger los datos de la base de datos contra p茅rdidas.

[](#铆ndice)

---

## **Conclusi贸n**

El proceso de respaldo y restauraci贸n de bases de datos en SQL Server es esencial para garantizar la integridad y disponibilidad de los datos. A trav茅s de la realizaci贸n de respaldos peri贸dicos, se crea una copia de seguridad de la base de datos, lo que permite recuperar los datos en caso de fallas, errores o p茅rdida de informaci贸n. Por otro lado, la restauraci贸n de una base de datos implica volver a cargar los datos desde un respaldo previo, lo que permite restaurar la base de datos a un estado anterior.

En el caso de la base de datos Northwind, se puede realizar un respaldo utilizando el comando `BACKUP DATABASE`, como se mencion贸 anteriormente. Este comando permite especificar la base de datos a respaldar y la ubicaci贸n del archivo de respaldo. Adem谩s, se pueden especificar opciones adicionales, como la creaci贸n de un nuevo conjunto de respaldo o el formateo del medio de respaldo.

Por ejemplo, supongamos que queremos realizar un respaldo de la base de datos Northwind y guardarlo en el archivo '`C:\Backup\Northwind.bak`':

```
BACKUP DATABASE Northwind
TO DISK = 'C:\Backup\Northwind.bak'
WITH INIT, FORMAT
```

Una vez que se ha creado un respaldo de la base de datos, es importante almacenarlo en una ubicaci贸n segura, como una unidad de disco externa o un servidor de respaldo remoto.

En el caso de necesitar restaurar la base de datos a partir de un respaldo previo, se utiliza el comando `RESTORE DATABASE`. Este comando permite especificar el nombre de la base de datos a restaurar y la ubicaci贸n del archivo de respaldo.

Por ejemplo, supongamos que queremos restaurar la base de datos Northwind a partir del archivo de respaldo '`C:\Backup\Northwind.bak`':

```
RESTORE DATABASE Northwind
FROM DISK = 'C:\Backup\Northwind.bak'
WITH REPLACE
```

Es importante tener en cuenta que al restaurar una base de datos, se sobrescribir谩 la versi贸n actual de la base de datos con los datos del respaldo. Por lo tanto, se debe tener precauci贸n al realizar esta operaci贸n, ya que puede resultar en la p茅rdida de datos.

En conclusi贸n, el respaldo y la restauraci贸n de bases de datos son procesos fundamentales para garantizar la disponibilidad y la integridad de los datos en SQL Server. Realizar respaldos peri贸dicos y almacenarlos en ubicaciones seguras ayuda a proteger los datos de posibles fallas o p茅rdidas. Adem谩s, la capacidad de restaurar una base de datos a partir de un respaldo proporciona una forma efectiva de recuperar datos en caso de incidentes. Es recomendable seguir buenas pr谩cticas de respaldo y restauraci贸n, como realizar respaldos regulares, verificar la integridad de los respaldos y probar el proceso de restauraci贸n peri贸dicamente para garantizar su eficacia.

[](#铆ndice)

---

| **Inicio**            | **atr谩s 18**          | **Siguiente 20**             |
| --------------------- | --------------------- | ---------------------------- |
| [](../../README.md) | [](./18.Trigger.md) | [](./20.Scheduled_JOBS.md) |
