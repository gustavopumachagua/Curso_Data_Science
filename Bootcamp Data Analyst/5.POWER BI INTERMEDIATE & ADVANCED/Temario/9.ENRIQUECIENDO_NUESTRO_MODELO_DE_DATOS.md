| **Inicio**               | **atr谩s 8**                                       | **Siguiente 10**                        |
| ------------------------ | ------------------------------------------------- | --------------------------------------- |
| [](../../../README.md) | [](./8.INTEGRACION_DE_DATOS_CON_POWER_QUERY.md) | [](./10.VISUALIZACION_DE_DATOS_II.md) |

---

## **ndice**

| Temario                                                                   |
| ------------------------------------------------------------------------- |
| [Contextos de Evaluaci贸n](#contextos-de-evaluaci贸n)                       |
| [Construcci贸n de m茅tricas avanzadas](#construcci贸n-de-m茅tricas-avanzadas) |
| [Uso de Variables](#uso-de-variables)                                     |
| [Uso del Performance Analysis](#uso-del-performance-analysis)             |
| [Integraci贸n con R y Python](#integraci贸n-con-r-y-python)                 |

---

# **9. ENRIQUECIENDO NUESTRO MODELO DE DATOS**

---

## **Contextos de Evaluaci贸n**

Los contextos de evaluaci贸n en un modelo de datos se refieren al conjunto de filtros y relaciones que se aplican a las f贸rmulas DAX (Data Analysis Expressions) al realizar c谩lculos en un conjunto de datos. Los contextos de evaluaci贸n determinan qu茅 filas y columnas son consideradas en un c谩lculo espec铆fico y c贸mo se aplican las relaciones entre las tablas.

Existen dos tipos de contextos de evaluaci贸n en un modelo de datos: el contexto de fila y el contexto de filtro.

1. **Contexto de fila:**

El contexto de fila se refiere a las filas individuales en una tabla y c贸mo las f贸rmulas DAX se eval煤an en cada una de ellas. En este contexto, las f贸rmulas DAX se eval煤an fila por fila, tomando en cuenta los valores de las columnas de la tabla actual.

**Ejemplo:** Supongamos que tienes una tabla de ventas con las columnas "Producto", "Cantidad" y "Precio". Si deseas calcular el total de ventas para cada producto, el contexto de fila evaluar铆a la f贸rmula para cada fila de la tabla, multiplicando la cantidad por el precio en cada caso y luego sumando los resultados para obtener el total de ventas por producto.

2. **Contexto de filtro:**

El contexto de filtro se refiere a los filtros aplicados a los datos a trav茅s de las relaciones entre las tablas. En este contexto, las f贸rmulas DAX se eval煤an teniendo en cuenta los filtros y las relaciones definidas en el modelo.

**Ejemplo:** Si tienes una tabla de ventas y una tabla de productos relacionadas por una clave externa, y deseas calcular el total de ventas para un producto espec铆fico, el contexto de filtro evaluar铆a la f贸rmula tomando en cuenta el filtro aplicado a la tabla de productos para seleccionar el producto deseado y luego sumar las ventas correspondientes a ese producto.

Es importante comprender y manejar adecuadamente los contextos de evaluaci贸n en un modelo de datos para obtener resultados precisos y coherentes en los c谩lculos realizados con f贸rmulas DAX. Esto implica entender c贸mo las relaciones entre las tablas afectan los resultados y c贸mo los filtros se aplican en diferentes contextos.

En resumen, los contextos de evaluaci贸n en un modelo de datos determinan qu茅 filas y columnas son consideradas en los c谩lculos realizados con f贸rmulas DAX. El contexto de fila se refiere a las filas individuales en una tabla, mientras que el contexto de filtro se refiere a los filtros y relaciones entre las tablas. Es fundamental comprender y utilizar correctamente los contextos de evaluaci贸n para obtener resultados precisos en los c谩lculos y an谩lisis de datos.

[](#铆ndice)

---

## **Construcci贸n de m茅tricas avanzadas**

La construcci贸n de m茅tricas avanzadas en un modelo de datos implica utilizar f贸rmulas DAX (Data Analysis Expressions) para calcular medidas personalizadas y complejas que van m谩s all谩 de los c谩lculos simples. Estas m茅tricas avanzadas permiten realizar an谩lisis m谩s profundos y obtener informaci贸n m谩s detallada sobre los datos. A continuaci贸n, se proporciona una explicaci贸n detallada de c贸mo construir m茅tricas avanzadas con ejemplos:

1. **Identificar la necesidad de una m茅trica avanzada:**

Analiza los requisitos espec铆ficos de tu an谩lisis y determina si las medidas existentes no son suficientes para satisfacer esas necesidades. Identifica las m茅tricas avanzadas que ser铆an 煤tiles para obtener informaci贸n m谩s detallada o realizar c谩lculos complejos.

**Ejemplo:** Si tienes un modelo de datos de ventas y deseas calcular la tasa de crecimiento de las ventas en comparaci贸n con el a帽o anterior, necesitar谩s construir una m茅trica avanzada para realizar este c谩lculo.

2. **Crear una nueva medida en el modelo de datos:**

Abre el editor de medidas en tu herramienta de modelado de datos (como Power BI) y crea una nueva medida. Utiliza una f贸rmula DAX para definir el c谩lculo espec铆fico que deseas realizar.

**Ejemplo:** Para calcular la tasa de crecimiento de las ventas en comparaci贸n con el a帽o anterior, puedes crear una medida llamada "Tasa de Crecimiento" con la siguiente f贸rmula:

```
Tasa de Crecimiento = DIVIDE(
  SUM(Ventas[Importe]),
  CALCULATE(
    SUM(Ventas[Importe]),
    SAMEPERIODLASTYEAR(Calendario[Fecha])
  )
) - 1
```

En esta f贸rmula, se utiliza la funci贸n SUM para sumar las ventas actuales y la funci贸n CALCULATE con `SAMEPERIODLASTYEAR` para obtener las ventas del a帽o anterior en el mismo per铆odo. Luego, se utiliza la funci贸n DIVIDE para calcular la tasa de crecimiento y se resta 1 para obtener el valor como porcentaje.

3. **Aplicar la medida en visualizaciones:**

Una vez creada la medida avanzada, puedes utilizarla en visualizaciones dentro de tu herramienta de modelado de datos. Agrega la medida a una tabla, gr谩fico o cualquier otra visualizaci贸n para ver los resultados calculados.

**Ejemplo:** Puedes agregar la medida "Tasa de Crecimiento" en un gr谩fico de l铆neas para visualizar la evoluci贸n de la tasa de crecimiento de las ventas a lo largo del tiempo.

4. **Refinar y ajustar las m茅tricas avanzadas:**

A medida que utilices las m茅tricas avanzadas en tus an谩lisis, es posible que desees refinarlas y ajustarlas seg煤n tus necesidades. Puedes realizar modificaciones en las f贸rmulas DAX para adaptarlas a situaciones espec铆ficas y obtener resultados m谩s precisos.

**Ejemplo:** Si deseas calcular la tasa de crecimiento promedio anual de las ventas, puedes ajustar la medida "Tasa de Crecimiento" para calcular el promedio anual utilizando la funci贸n AVERAGEX en combinaci贸n con la funci贸n GROUPBY.

En resumen, la construcci贸n de m茅tricas avanzadas implica utilizar f贸rmulas DAX para realizar c谩lculos personalizados y complejos en un modelo de datos. Identificar las necesidades espec铆ficas de an谩lisis, crearuna nueva medida, aplicarla en visualizaciones y refinarla seg煤n sea necesario. Esto permite obtener informaci贸n m谩s detallada y realizar c谩lculos m谩s complejos que van m谩s all谩 de las medidas est谩ndar. Al utilizar m茅tricas avanzadas, puedes obtener una visi贸n m谩s profunda de tus datos y realizar an谩lisis m谩s precisos y detallados.

[](#铆ndice)

---

## **Uso de Variables**

El uso de variables en el lenguaje DAX (Data Analysis Expressions) permite asignar y almacenar valores temporales dentro de una f贸rmula o expresi贸n. Las variables son 煤tiles cuando necesitas realizar c谩lculos repetitivos o cuando deseas simplificar f贸rmulas complejas dividi茅ndolas en partes m谩s manejables. A continuaci贸n, se proporciona una explicaci贸n detallada del uso de variables en DAX con ejemplos:

1. **Declaraci贸n de variables:**

Para utilizar una variable, primero debes declararla y asignarle un nombre descriptivo. Puedes declarar una variable utilizando la palabra clave "VAR" seguida del nombre de la variable y el operador de asignaci贸n (":=") para asignarle un valor.

**Ejemplo:**

`VAR TotalVentas = SUM(Ventas[Importe])`

En este ejemplo, se declara una variable llamada "TotalVentas" y se le asigna el resultado de la funci贸n SUM aplicada a la columna "Importe" de la tabla "Ventas".

2. **Utilizaci贸n de variables en f贸rmulas:**

Una vez que has declarado una variable, puedes utilizarla en cualquier parte de la f贸rmula en lugar de repetir el c谩lculo completo. Esto ayuda a simplificar y hacer m谩s legibles las f贸rmulas complejas.

**Ejemplo:**

```
VAR TotalVentas = SUM(Ventas[Importe])
RETURN
TotalVentas * 0.1
```

En este ejemplo, se utiliza la variable "TotalVentas" en la f贸rmula de retorno en lugar de repetir el c谩lculo de la suma de las ventas. Esto hace que la f贸rmula sea m谩s clara y f谩cil de entender.

3. **mbito de las variables:**

Las variables tienen un 谩mbito limitado en el que son v谩lidas. Normalmente, el 谩mbito de una variable es la f贸rmula en la que se declara, y solo se puede utilizar dentro de esa f贸rmula.

**Ejemplo:**

```
VAR TotalVentas = SUM(Ventas[Importe])
RETURN
IF(TotalVentas > 1000, "Alto", "Bajo")
```

En este ejemplo, la variable "TotalVentas" solo es v谩lida dentro de la f贸rmula IF y no puede ser utilizada fuera de ella.

4. **Uso de variables en c谩lculos condicionales:**

Las variables tambi茅n son 煤tiles en c谩lculos condicionales, ya que permiten asignar valores diferentes en funci贸n de una condici贸n espec铆fica.

**Ejemplo:**

```
VAR TotalVentas = SUM(Ventas[Importe])
VAR Descuento = IF(TotalVentas > 1000, 0.1, 0)
RETURN
TotalVentas * (1 - Descuento)
```

En este ejemplo, la variable "Descuento" se asigna como 0.1 si el total de ventas es mayor a 1000, y 0 en caso contrario. Luego, se utiliza la variable "Descuento" en el c谩lculo del total de ventas aplicando el descuento correspondiente.

El uso de variables en DAX ayuda a simplificar y optimizar las f贸rmulas, almacena valores temporales y facilita el mantenimiento y comprensi贸n del c贸digo. Puedes utilizar variables para realizar c谩lculos repetitivos, descomponer f贸rmulas complejas enpartes m谩s manejables y asignar valores condicionales de manera m谩s legible. Al utilizar variables, puedes mejorar la eficiencia y la claridad de tus f贸rmulas en DAX.

[](#铆ndice)

---

## **Uso del Performance Analysis**

El Performance Analysis, o an谩lisis de rendimiento, es una t茅cnica utilizada en el campo de la inteligencia de negocios para evaluar el rendimiento y la eficacia de una organizaci贸n, un departamento o un proceso espec铆fico. Proporciona informaci贸n valiosa sobre la eficiencia operativa, la rentabilidad y el logro de objetivos.

El Performance Analysis implica recopilar y analizar datos relevantes para medir y evaluar el rendimiento en funci贸n de m茅tricas clave y objetivos establecidos. A trav茅s de esta t茅cnica, se pueden identificar 谩reas de mejora, oportunidades de optimizaci贸n y patrones que afectan el rendimiento empresarial. A continuaci贸n, se proporciona una explicaci贸n detallada del uso del Performance Analysis con ejemplos:

1. **Definici贸n de m茅tricas clave:**

Identifica las m茅tricas clave que reflejan los objetivos y resultados deseados. Estas m茅tricas pueden variar seg煤n la organizaci贸n y el contexto, pero suelen incluir indicadores de rendimiento clave (KPI) como ingresos, rentabilidad, satisfacci贸n del cliente, tiempo de respuesta, eficiencia operativa, entre otros.

**Ejemplo:** Si una empresa desea evaluar el rendimiento de su equipo de ventas, las m茅tricas clave pueden incluir ingresos generados, n煤mero de clientes adquiridos, tasa de conversi贸n de ventas, entre otros.

2. **Recopilaci贸n de datos:**

Re煤ne los datos necesarios para calcular y evaluar las m茅tricas clave. Estos datos pueden provenir de diversas fuentes, como sistemas de gesti贸n empresarial, bases de datos, hojas de c谩lculo u otras herramientas de an谩lisis.

**Ejemplo:** Para evaluar el rendimiento del equipo de ventas, se recopilar铆an datos como el historial de ventas, los registros de clientes y las actividades de seguimiento.

3. **An谩lisis y comparaci贸n:**

Utiliza los datos recopilados para calcular las m茅tricas clave y realizar comparaciones entre diferentes per铆odos de tiempo, departamentos, equipos u otros segmentos relevantes. Esto te permitir谩 identificar tendencias, patrones y variaciones en el rendimiento.

**Ejemplo:** Al calcular los ingresos generados por el equipo de ventas en el 煤ltimo trimestre y compararlos con el trimestre anterior, se puede determinar si ha habido un aumento o una disminuci贸n en el rendimiento.

4. **Identificaci贸n de desviaciones y oportunidades de mejora:**

Analiza los resultados del an谩lisis para identificar desviaciones significativas, tanto positivas como negativas, en relaci贸n con las m茅tricas clave y los objetivos establecidos. Estas desviaciones pueden indicar 谩reas de mejora o 茅xito que requieren atenci贸n.

**Ejemplo:** Si se observa una disminuci贸n significativa en la tasa de conversi贸n de ventas, se pueden tomar medidas para identificar las causas y desarrollar estrategias para mejorar el rendimiento.

5. **Acciones correctivas y seguimiento:**

Basado en los hallazgos del an谩lisis de rendimiento, toma medidas correctivas para abordar las 谩reas problem谩ticas y capitalizar las oportunidades de mejora. Establece planes de acci贸n y realiza un seguimiento regular para evaluar el impacto de las medidas implementadas.

**Ejemplo:** Si se identifica una baja satisfacci贸n del cliente en un 谩rea espec铆fica, se pueden implementar iniciativas de capacitaci贸n y mejora del servicio al cliente, y realizar un seguimiento para evaluar la satisfacci贸n del cliente a lo largo del tiempo.

En resumen, el Performance Analysis es una t茅cnica que implica la recopilaci贸n y an谩lisis de datos para evaluar y mejorar el rendimiento empresarial. Mediante la identificaci贸n de m茅tricas clave, el an谩lisis de datos, la comparaci贸n, la identificaci贸n de desviaciones y la toma de acciones correctivas, se pueden obtener informaci贸n valiosa para optimizar el rendimiento y lograr los objetivos establecidos. El Performance Analysis proporciona una visi贸n m谩s profunda de la eficacia operativa y permite tomar decisiones informadas para mejorar la rentabilidad y el 茅xito de la organizaci贸n.

[](#铆ndice)

---

## **Integraci贸n con R y Python**

La integraci贸n de Power BI con R y Python permite aprovechar las capacidades de lenguajes de programaci贸n populares y poderosos para realizar an谩lisis avanzados, estad铆sticas y visualizaciones en tus informes y paneles de Power BI. A continuaci贸n, te proporcionar茅 una explicaci贸n detallada de c贸mo funciona esta integraci贸n, junto con ejemplos:

1. **Integraci贸n de R y Python en Power BI:**

Power BI ofrece una funcionalidad nativa para la integraci贸n de R y Python. Esto permite ejecutar scripts de R y Python directamente dentro de Power BI y utilizar los resultados de estos scripts para crear visualizaciones, modelos de datos y an谩lisis en tus informes.

2. **Conexi贸n y configuraci贸n de R y Python en Power BI:**

Para utilizar R y Python en Power BI, debes tener instalado R y/o Python en tu m谩quina local. Luego, debes configurar Power BI para reconocer y utilizar estas herramientas. En la pesta帽a "Archivos" de Power BI Desktop, puedes ir a "Opciones y configuraci贸n" y seleccionar "Opciones". Desde all铆, puedes habilitar la opci贸n "Habilitar lenguajes R y Python" y especificar la ubicaci贸n de las instalaciones de R y Python en tu m谩quina.

3. **Uso de R y Python en Power BI:**

Una vez configurado, puedes utilizar R y Python en Power BI de varias maneras:

a. Visualizaciones personalizadas: Puedes crear visualizaciones personalizadas utilizando R y Python. Esto te permite aprovechar las capacidades gr谩ficas y estad铆sticas de estos lenguajes para crear visualizaciones interactivas y personalizadas en tus informes.

b. Transformaciones de datos: Puedes utilizar scripts de R y Python para realizar transformaciones y manipulaciones de datos m谩s avanzadas. Por ejemplo, puedes realizar limpieza de datos compleja, an谩lisis estad铆stico o realizar operaciones de machine learning.

c. C谩lculos y medidas avanzadas: Puedes utilizar R y Python para realizar c谩lculos y medidas personalizadas. Esto te permite realizar an谩lisis estad铆sticos m谩s complejos, aplicar algoritmos de machine learning o realizar proyecciones y simulaciones.

**Ejemplo de integraci贸n con R:**

Supongamos que deseas realizar un an谩lisis estad铆stico de tus datos en Power BI utilizando R. Puedes crear un gr谩fico de dispersi贸n con una l铆nea de tendencia utilizando una biblioteca estad铆stica en R, como "ggplot2". Puedes escribir un script R en Power BI para generar este gr谩fico y utilizarlo como visualizaci贸n en tu informe.

```
library(ggplot2)

data <- dataset # Reemplaza "dataset" con el nombre de tu conjunto de datos en Power BI
plot <- ggplot(data, aes(x = variable1, y = variable2)) +
  geom_point() +
  geom_smooth(method = "lm")

plot
```

Este script utiliza el paquete "ggplot2" para crear un gr谩fico de dispersi贸n con una l铆nea de tendencia basada en los datos de las columnas "variable1" y "variable2" en tu conjunto de datos de Power BI.

**Ejemplo de integraci贸n con Python:**

Supongamos que deseas realizar un an谩lisis de texto en tus datos de Power BI utilizando Python. Puedes utilizar una biblioteca de procesamiento de lenguaje natural, como "NLTK", para realizar el an谩lisis. Puedes escribir unscript Python en Power BI para realizar este an谩lisis y utilizar los resultados en tus informes.

```
import nltk
from nltk.corpus import stopwords
from nltk.tokenize import word_tokenize

data = dataset  # Reemplaza "dataset" con el nombre de tu conjunto de datos en Power BI
text_column = 'texto'  # Reemplaza "texto" con el nombre de la columna de texto en tu conjunto de datos

# Tokenizaci贸n y eliminaci贸n de palabras vac铆as
stop_words = set(stopwords.words('english'))
data['tokens'] = data[text_column].apply(lambda x: [word for word in word_tokenize(x) if word.lower() not in stop_words])

# Conteo de palabras
word_count = data['tokens'].apply(lambda x: len(x))

data['word_count'] = word_count

data.head()
```

Este script utiliza la biblioteca "NLTK" para realizar la tokenizaci贸n y eliminaci贸n de palabras vac铆as en una columna de texto. Luego, se realiza el conteo de palabras en cada fila y se crea una nueva columna llamada "word_count".

La integraci贸n de R y Python en Power BI proporciona flexibilidad y potencia adicional para realizar an谩lisis avanzados, estad铆sticas y visualizaciones personalizadas. Puedes aprovechar las capacidades de estos lenguajes para obtener informaci贸n m谩s detallada y realizar c谩lculos complejos en tus datos de Power BI.

[](#铆ndice)

---

| **Inicio**               | **atr谩s 8**                                       | **Siguiente 10**                        |
| ------------------------ | ------------------------------------------------- | --------------------------------------- |
| [](../../../README.md) | [](./8.INTEGRACION_DE_DATOS_CON_POWER_QUERY.md) | [](./10.VISUALIZACION_DE_DATOS_II.md) |
